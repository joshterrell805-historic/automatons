# hash table of regions to valid area codes
ID = {}

ID["AL"] = [205, 251, 256, 334, 938]
ID["AK"] = [907]
ID["AZ"] = [480, 520, 602, 623, 928]
ID["AR"] = [479, 501, 870]
ID["CA"] = [209, 213, 310, 323, 408, 415, 424, 442, 510, 530, 559, 562, 619,
    626, 650, 657, 661, 669, 707, 714, 747, 760, 805, 818, 831, 858, 909, 916,
    925, 949, 951]
ID["CO"] = [303, 719, 720, 970]
ID["CT"] = [203, 475, 860]
ID["DE"] = [302]
ID["FL"] = [239, 305, 321, 352, 386, 407, 561, 727, 754, 772, 786, 813, 850,
    863, 904, 941, 954]
ID["GA"] = [229, 404, 470, 478, 678, 706, 762, 770, 912]
ID["HI"] = [808]
ID["ID"] = [208]
ID["IL"] = [217, 224, 309, 312, 331, 618, 630, 708, 773, 779, 815, 847, 872]
ID["IN"] = [219, 260, 317, 574, 765, 812]
ID["IA"] = [319, 515, 563, 641, 712]
ID["KS"] = [316, 620, 785, 913]
ID["KY"] = [270, 502, 606, 859]
ID["LA"] = [225, 318, 337, 504, 985]
ID["ME"] = [207]
ID["MD"] = [240, 301, 410, 443, 667]
ID["MA"] = [339, 351, 413, 508, 617, 774, 781, 857, 978]
ID["MI"] = [231, 248, 269, 313, 517, 586, 616, 734, 810, 906, 947, 989]
ID["MN"] = [218, 320, 507, 612, 651, 763, 952]
ID["MS"] = [228, 601, 662, 769]
ID["MO"] = [314, 417, 573, 636, 660, 816]
ID["MT"] = [406]
ID["NE"] = [308, 402, 531]
ID["NV"] = [702, 725, 775]
ID["NH"] = [603]
ID["NJ"] = [201, 551, 609, 732, 848, 856, 862, 908, 973]
ID["NM"] = [505, 575]
ID["NY"] = [212, 315, 347, 516, 518, 585, 607, 631, 646, 716, 718, 845,
   914, 917, 929]
ID["NC"] = [252, 336, 704, 828, 910, 919, 980, 984]
ID["ND"] = [701]
ID["OH"] = [216, 234, 330, 419, 440, 513, 567, 614, 740, 937]
ID["OK"] = [405, 539, 580, 918]
ID["OR"] = [458, 503, 541, 971]
ID["PA"] = [215, 267, 272, 412, 484, 570, 610, 717, 724, 814, 878]
ID["RI"] = [401]
ID["SC"] = [803, 843, 864]
ID["SD"] = [605]
ID["TN"] = [423, 615, 731, 865, 901, 931]
ID["TX"] = [210, 214, 254, 281, 325, 346, 361, 409, 430, 432, 469, 512, 682,
   713, 737, 806, 817, 830, 832, 903, 915, 936, 940, 956, 972, 979]
ID["UT"] = [385, 435, 801]
ID["VT"] = [802]
ID["VA"] = [276, 434, 540, 571, 703, 757, 804]
ID["WA"] = [206, 253, 360, 425, 509]
ID["WV"] = [304, 681]
ID["WI"] = [262, 414, 534, 608, 715, 920]
ID["WY"] = [307]

ID["AS"] = [684] # American Samoa
ID["GU"] = [671] # Guam
ID["MP"] = [670] # North Mariana Island
ID["PR"] = [787, 939] # Puerto Rico
ID["VI"] = [340] # Virgin Islands
ID["DC"] = [202] # District of Columbia


def verifyAreaCode(areacode, regionA, regionB)
   for value in ID[regionA]
      if areacode == value
	     return true
      end
   end
   for value in ID[regionB]
      if areacode == value
	     return true
      end
   end
   return false
end

def formatPhone(number, regionA, regionB)
   if !verifyAreaCode(number[0,3].to_i, regionA, regionB)
      return number
   end
   return "(" + number[0,3] + ") " + number[3,3] + "-" + number[6,4]
end

puts formatPhone("8057486583", "CA", "MA")
puts formatPhone("8057486583", "TX", "CA")
puts formatPhone("8057486583", "TX", "MA")

puts verifyAreaCode(805, "CA", "MS")
puts verifyAreaCode(805, "TX", "CA")
puts verifyAreaCode(805, "TX", "MS")
