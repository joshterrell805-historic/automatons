#!/usr/bin/env ruby
if ENV['COVERAGE']
   require 'simplecov'
   SimpleCov.command_name 'app'
   puts "Gathering coverage data..."
end
# This is the main file for our entire project
# It provides an interface to the App class, which does the main work.
# This arrangement is for ease of testing.
$LOAD_PATH << File.absolute_path(File.join(File.dirname(__FILE__),'..', 'lib'))
require 'bundler/setup'
require 'main'
require 'database'
require 'business_rules'

db = Database.new
cleanser = BusinessRules.new

main = Main.new db, cleanser.cleanser
main.run ARGV
